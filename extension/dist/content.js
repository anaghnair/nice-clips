(()=>{"use strict";var e,t={377:(e,t,r)=>{var s=r(696),a=r(470),n=r(540),i=r(182),l=r(530),o=r(750),d=r(890);function c(...e){return(0,d.QP)((0,o.$)(e))}const u=(0,l.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground shadow-xs hover:bg-primary/90",destructive:"bg-destructive text-white shadow-xs hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground shadow-xs hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9"}},defaultVariants:{variant:"default",size:"default"}});function m({className:e,variant:t,size:r,asChild:s=!1,...a}){const l=s?i.DX:"button";return(0,n.jsx)(l,{"data-slot":"button",className:c(u({variant:t,size:r,className:e})),...a})}function x({className:e,type:t,...r}){return(0,n.jsx)("input",{type:t,"data-slot":"input",className:c("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",e),...r})}var h=r(535);function f({className:e,value:t,...r}){return(0,n.jsx)(h.bL,{"data-slot":"progress",className:c("bg-primary/20 relative h-2 w-full overflow-hidden rounded-full",e),...r,children:(0,n.jsx)(h.C1,{"data-slot":"progress-indicator",className:"bg-primary h-full w-full flex-1 transition-all",style:{transform:`translateX(-${100-(t||0)}%)`}})})}const v=e=>`${Math.floor(e/60)}:${Math.floor(e%60).toString().padStart(2,"0")}`,p=({startTime:e,endTime:t,maxDuration:r,onStartTimeChange:a,onEndTimeChange:i})=>{const[l,o]=(0,s.useState)(null),d=(0,s.useRef)(null),c=e/r*100,u=t/r*100,m=t-e,x=e=>t=>{t.preventDefault(),o(e)},h=s=>{if(!l||!d.current)return;const n=d.current.getBoundingClientRect(),o=s.clientX-n.left,c=Math.max(0,Math.min(100,o/n.width*100))/100*r;if("start"===l){const e=Math.max(0,Math.min(c,t-1));a(e)}else if("end"===l){const t=Math.max(e+1,Math.min(c,r));i(t)}},f=()=>{o(null)};return(0,s.useEffect)(()=>{if(l)return document.addEventListener("mousemove",h),document.addEventListener("mouseup",f),()=>{document.removeEventListener("mousemove",h),document.removeEventListener("mouseup",f)}},[l,e,t,r]),(0,n.jsxs)("div",{className:"w-full",children:[(0,n.jsxs)("div",{className:"flex justify-between text-xs text-gray-400 mb-2",children:[(0,n.jsx)("span",{children:"0:00"}),(0,n.jsx)("span",{children:v(r)})]}),(0,n.jsxs)("div",{ref:d,className:"relative h-6 bg-gray-700 rounded-full cursor-pointer",onClick:s=>{if(l)return;const n=d.current.getBoundingClientRect(),o=(s.clientX-n.left)/n.width*100/100*r;if(Math.abs(o-e)<Math.abs(o-t)){const e=Math.max(0,Math.min(o,t-1));a(e)}else{const t=Math.max(e+1,Math.min(o,r));i(t)}},children:[(0,n.jsx)("div",{className:"absolute inset-0 rounded-full bg-gray-700"}),(0,n.jsx)("div",{className:"absolute top-0 h-full rounded-full "+(m>120?"bg-red-500":"bg-blue-500"),style:{left:`${c}%`,width:u-c+"%"}}),(0,n.jsx)("div",{className:"absolute top-1/2 w-4 h-4 bg-white rounded-full shadow-lg cursor-pointer transform -translate-y-1/2 hover:scale-110 transition-transform",style:{left:`${c}%`,marginLeft:"-8px"},onMouseDown:x("start")}),(0,n.jsx)("div",{className:"absolute top-1/2 w-4 h-4 bg-white rounded-full shadow-lg cursor-pointer transform -translate-y-1/2 hover:scale-110 transition-transform",style:{left:`${u}%`,marginLeft:"-8px"},onMouseDown:x("end")}),(0,n.jsx)("div",{className:"absolute -top-6 text-xs text-gray-300 transform -translate-x-1/2",style:{left:`${c}%`},children:v(e)}),(0,n.jsx)("div",{className:"absolute -top-6 text-xs text-gray-300 transform -translate-x-1/2",style:{left:`${u}%`},children:v(t)})]}),(0,n.jsx)("div",{className:"text-center mt-2",children:(0,n.jsxs)("span",{className:"text-sm "+(m>120?"text-red-400":"text-green-400"),children:["Selected: ",v(m),m>120&&" (exceeds 2min limit)"]})})]})},g=({initialValue:e,onSave:t})=>{const[r,a]=(0,s.useState)(!1),[i,l]=(0,s.useState)(e),o=()=>{i.trim()&&i!==e&&t(i.trim()),a(!1)};return r?(0,n.jsx)(x,{value:i,onChange:e=>l(e.target.value),onBlur:o,onKeyDown:t=>{"Enter"===t.key?o():"Escape"===t.key&&(l(e),a(!1))},className:"bg-gray-800 border-gray-600 text-white text-sm",autoFocus:!0}):(0,n.jsxs)("div",{onClick:()=>a(!0),className:"text-sm text-gray-300 cursor-pointer hover:text-white border border-transparent hover:border-gray-600 px-2 py-1 rounded transition-colors",children:[i," ",(0,n.jsx)("span",{className:"text-gray-500",children:"✎"})]})},b=e=>`${Math.floor(e/60)}:${Math.floor(e%60).toString().padStart(2,"0")}`,y=({videoId:e,videoTitle:t,onClose:r})=>{const[a,i]=(0,s.useState)("editing"),[l,o]=(0,s.useState)(t),[d,c]=(0,s.useState)(0),[u,h]=(0,s.useState)(30),[v,y]=(0,s.useState)(0),[j,w]=(0,s.useState)(0),[N,C]=(0,s.useState)(""),[k,M]=(0,s.useState)(!1),S=(0,s.useRef)(null),E=Math.min(u-d,120),T=E>0&&E<=120;(0,s.useEffect)(()=>{y(u-d)},[d,u]);return(0,n.jsxs)("div",{className:"fixed inset-0 transition-all duration-500 "+(k?"pointer-events-none":"pointer-events-auto"),style:{zIndex:999999},children:[!k&&(0,n.jsx)("div",{className:"absolute inset-0 bg-black bg-opacity-90",onClick:r}),(0,n.jsx)("div",{className:"transition-all duration-500 "+(k?"fixed top-4 left-4 w-80 h-auto pointer-events-auto":"absolute inset-4 pointer-events-auto"),children:k?(0,n.jsx)("div",{className:"fixed top-4 left-4 w-80 bg-black text-white rounded-lg shadow-2xl border border-gray-700 cursor-pointer transition-all duration-300 hover:scale-105",onClick:"processing"===a?()=>{M(!1)}:void 0,style:{zIndex:999999},children:(0,n.jsxs)("div",{className:"p-4",children:[(0,n.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,n.jsx)("h3",{className:"font-semibold truncate flex-1",children:l}),(0,n.jsx)(m,{variant:"ghost",size:"sm",onClick:e=>{e.stopPropagation(),r()},className:"text-white hover:bg-gray-700 ml-2",children:"✕"})]}),"processing"===a&&(0,n.jsx)(n.Fragment,{children:(0,n.jsxs)("div",{className:"mb-2",children:[(0,n.jsxs)("div",{className:"flex justify-between text-sm text-gray-400 mb-1",children:[(0,n.jsx)("span",{children:"Processing..."}),(0,n.jsxs)("span",{children:[Math.round(j),"%"]})]}),(0,n.jsx)(f,{value:j,className:"h-2"})]})}),"completed"===a&&(0,n.jsxs)("div",{className:"space-y-3",children:[(0,n.jsx)("div",{className:"flex items-center space-x-2",children:(0,n.jsx)("span",{className:"text-green-400 text-sm",children:"✓ Clip ready!"})}),(0,n.jsxs)("div",{className:"flex space-x-2",children:[(0,n.jsx)(x,{value:N,readOnly:!0,className:"bg-gray-800 border-gray-600 text-white text-xs flex-1"}),(0,n.jsx)(m,{variant:"outline",size:"sm",onClick:()=>{navigator.clipboard.writeText(N)},className:"border-gray-600 text-white hover:bg-gray-700",children:"Copy"})]}),(0,n.jsx)(g,{initialValue:l,onSave:e=>{o(e)}})]})]})}):(0,n.jsxs)("div",{className:"bg-black text-white h-full flex flex-col",children:[(0,n.jsxs)("div",{className:"flex justify-between items-center p-4 border-b border-gray-700",children:[(0,n.jsx)("h2",{className:"text-xl font-bold",children:"Create Clip"}),(0,n.jsx)(m,{variant:"ghost",size:"sm",onClick:r,className:"text-white hover:bg-gray-700",children:"✕"})]}),(0,n.jsxs)("div",{className:"flex-1 flex",children:[(0,n.jsxs)("div",{className:"flex-1 flex flex-col",children:[(0,n.jsx)("div",{className:"flex-1 bg-black flex items-center justify-center",children:(0,n.jsx)("iframe",{ref:S,src:`https://www.youtube.com/embed/${e}?start=${Math.floor(d)}&autoplay=1&controls=1`,className:"w-full h-full",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0})}),(0,n.jsxs)("div",{className:"p-4 bg-gray-900",children:[(0,n.jsx)(p,{startTime:d,endTime:u,maxDuration:600,onStartTimeChange:c,onEndTimeChange:h}),(0,n.jsxs)("div",{className:"flex justify-between text-sm text-gray-400 mt-2",children:[(0,n.jsxs)("span",{children:[b(d)," - ",b(u)]}),(0,n.jsxs)("span",{className:v>120?"text-red-400":"text-green-400",children:["Duration: ",b(v)]})]})]})]}),(0,n.jsxs)("div",{className:"w-80 border-l border-gray-700 p-4 flex flex-col",children:[(0,n.jsxs)("div",{className:"mb-4",children:[(0,n.jsx)("label",{className:"block text-sm font-medium mb-2",children:"Clip Title"}),(0,n.jsx)(x,{value:l,onChange:e=>o(e.target.value),className:"bg-gray-800 border-gray-600 text-white",placeholder:"Enter clip title..."})]}),(0,n.jsx)("div",{className:"flex-1"}),(0,n.jsx)(m,{onClick:async()=>{if(T){i("processing"),M(!0);try{const r=await chrome.runtime.sendMessage({type:"CREATE_CLIP",data:{videoId:e,title:l,startTime:d,endTime:u,originalTitle:t}});if(!r.success)throw new Error(r.error||"Failed to create clip");{let e=0;const t=setInterval(()=>{e+=10*Math.random(),e>=100&&(e=100,clearInterval(t),i("completed"),C(`https://nice-clips.vercel.app/clip/${r.clipId}`)),w(e)},500)}}catch(e){console.error("Error creating clip:",e),alert("Failed to create clip. Please try again."),i("editing"),M(!1)}}},disabled:!T||!l.trim(),className:"w-full bg-red-600 hover:bg-red-700 text-white",children:"Create Clip"}),v>120&&(0,n.jsx)("p",{className:"text-red-400 text-sm mt-2",children:"Maximum clip duration is 2 minutes"})]})]})]})})]})};let j=!1,w=null,N=null;function C(){j&&(j=!1,w&&(w.unmount(),w=null),N&&(document.body.removeChild(N),N=null))}chrome.runtime.onMessage.addListener((e,t,r)=>{"OPEN_CLIP_CREATOR"===e.type&&(function(){if(j)return;const e=new URL(window.location.href).searchParams.get("v");if(!e)return void console.error("Could not extract video ID from URL");const t=function(){const e=document.querySelector("h1.ytd-watch-metadata yt-formatted-string");return e?.textContent||"YouTube Video"}();j=!0,N=function(){const e=document.createElement("div");return e.id="nice-clips-popup-container",e.style.cssText="\n    position: fixed;\n    top: 0;\n    left: 0;\n    width: 100vw;\n    height: 100vh;\n    z-index: 999999;\n    pointer-events: none;\n  ",document.body.appendChild(e),e}(),w=(0,a.createRoot)(N),w.render(s.createElement(y,{videoId:e,videoTitle:t,onClose:C}))}(),r({success:!0}))})}},r={};function s(e){var a=r[e];if(void 0!==a)return a.exports;var n=r[e]={exports:{}};return t[e](n,n.exports,s),n.exports}s.m=t,e=[],s.O=(t,r,a,n)=>{if(!r){var i=1/0;for(c=0;c<e.length;c++){for(var[r,a,n]=e[c],l=!0,o=0;o<r.length;o++)(!1&n||i>=n)&&Object.keys(s.O).every(e=>s.O[e](r[o]))?r.splice(o--,1):(l=!1,n<i&&(i=n));if(l){e.splice(c--,1);var d=a();void 0!==d&&(t=d)}}return t}n=n||0;for(var c=e.length;c>0&&e[c-1][2]>n;c--)e[c]=e[c-1];e[c]=[r,a,n]},s.d=(e,t)=>{for(var r in t)s.o(t,r)&&!s.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},s.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={854:0};s.O.j=t=>0===e[t];var t=(t,r)=>{var a,n,[i,l,o]=r,d=0;if(i.some(t=>0!==e[t])){for(a in l)s.o(l,a)&&(s.m[a]=l[a]);if(o)var c=o(s)}for(t&&t(r);d<i.length;d++)n=i[d],s.o(e,n)&&e[n]&&e[n][0](),e[n]=0;return s.O(c)},r=self.webpackChunk=self.webpackChunk||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))})();var a=s.O(void 0,[121],()=>s(377));a=s.O(a)})();