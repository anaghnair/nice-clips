(()=>{"use strict";chrome.runtime.onInstalled.addListener(()=>{console.log("Nice Clips extension installed")}),chrome.action.onClicked.addListener(e=>{e.id&&e.url&&(e.url.includes("youtube.com/watch")?chrome.tabs.sendMessage(e.id,{type:"OPEN_CLIP_CREATOR",videoUrl:e.url}):chrome.tabs.create({url:"https://youtube.com"}))}),chrome.runtime.onMessage.addListener((e,t,i)=>{if("CREATE_CLIP"===e.type){const{videoId:t,title:s,startTime:r,endTime:o,originalTitle:c}=e.data;return fetch("https://nice-clips.vercel.app/api/process-clip",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({videoId:t,title:s,startTime:r,endTime:o,originalTitle:c})}).then(e=>e.json()).then(e=>{i({success:!0,clipId:e.clipId})}).catch(e=>{console.error("Error creating clip:",e),i({success:!1,error:e.message})}),!0}})})();